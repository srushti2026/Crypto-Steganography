services:
  - type: web
    name: crypto-steganography-backend
    env: python
    runtime: python-3.11
    buildCommand: "pip install --upgrade pip && pip install -r Backend/requirements.txt"
    startCommand: "cd Backend && uvicorn app:app --host 0.0.0.0 --port $PORT"
    plan: starter
    healthCheckPath: /health
    autoDeploy: true
    # Increased timeouts for steganography operations
    healthCheckGracePeriod: 60s
    healthCheckInterval: 30s
    # Environment setup
    preDeployCommand: "echo 'Starting VeilForge backend deployment' && cd Backend && python -c 'print(\"Backend structure verified\")'"
    envVars:
      - key: PORT
        value: 10000
      - key: RENDER
        value: "true"
      - key: PYTHONPATH
        value: "/opt/render/project/src/Backend"
      - key: ENVIRONMENT
        value: "production"
      # REQUIRED: Add these environment variables in Render dashboard:
      # - key: SUPABASE_URL
      #   sync: false  # Set in Render dashboard
      # - key: SUPABASE_ANON_KEY  
      #   sync: false  # Set in Render dashboard
      # - key: SUPABASE_SERVICE_KEY
      #   sync: false  # Set in Render dashboard (optional)
      # - key: EMAIL_USER
      #   sync: false  # Set in Render dashboard (optional)
      # - key: EMAIL_PASSWORD
      #   sync: false  # Set in Render dashboard (optional)
      # - key: HF_TOKEN
      #   sync: false  # Set in Render dashboard (optional)